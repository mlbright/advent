<div class="calendar-day-show">
  <div class="day-header">
    <h1>December <%= @day.day_number %>, <%= @calendar.year %></h1>
    <% if @day.title.present? %>
      <h2 class="day-title"><%= @day.title %></h2>
    <% end %>
    <p class="calendar-title">From: <%= @calendar.title %></p>
    
    <% if viewing_as_creator? %>
      <div class="alert alert-info">
        <strong>Creator Preview</strong> - This is how the recipient will see this day.
      </div>
    <% end %>
  </div>

  <div class="day-navigation">
    <% prev_day = @calendar.calendar_days.where("day_number < ?", @day.day_number).order(day_number: :desc).first %>
    <% next_day = @calendar.calendar_days.where("day_number > ?", @day.day_number).order(day_number: :asc).first %>
    
    <% if prev_day && @calendar.day_unlocked_for?(prev_day.day_number, current_user) %>
      <%= link_to "← Day #{prev_day.day_number}", calendar_calendar_day_path(@calendar, prev_day.day_number), class: "btn btn-sm" %>
    <% else %>
      <span class="btn btn-sm disabled">← Previous</span>
    <% end %>
    
    <%= link_to "Back to Calendar", calendar_path(@calendar), class: "btn btn-sm" %>
    
    <% if next_day && @calendar.day_unlocked_for?(next_day.day_number, current_user) %>
      <%= link_to "Day #{next_day.day_number} →", calendar_calendar_day_path(@calendar, next_day.day_number), class: "btn btn-sm" %>
    <% else %>
      <span class="btn btn-sm disabled">Next →</span>
    <% end %>
  </div>

  <% if viewing_as_creator? %>
    <div class="creator-actions">
      <%= link_to "Edit This Day", edit_calendar_calendar_day_path(@calendar, @day.day_number), class: "btn btn-primary" %>
    </div>
  <% end %>

  <div class="day-content">
    <% if @day.has_content? %>
      <div class="content-item">
        <% if @day.content_type == 'image' %>
          <div class="image-content">
            <%= UrlEmbedder.embed(@day.url, 'image') %>
          </div>
        <% elsif @day.content_type == 'video' %>
          <div class="video-content">
            <%= UrlEmbedder.embed(@day.url, 'video') %>
          </div>
        <% end %>
        
        <% if @day.description.present? %>
          <div class="content-description">
            <%= simple_format(@day.description) %>
          </div>
        <% end %>
      </div>
    <% else %>
      <% if viewing_as_creator? %>
        <div class="empty-state">
          <p>This day has no content yet.</p>
          <%= link_to "Add Content", edit_calendar_calendar_day_path(@calendar, @day.day_number), class: "btn btn-primary" %>
        </div>
      <% else %>
        <div class="empty-state">
          <p>No content available for this day.</p>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
